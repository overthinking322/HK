(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["58736"],{922464:function(e,t,n){var i,o;n.r(t),n.d(t,{default:()=>s});let l=(o=[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommentThreadContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null},i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"doneByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},i,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});l.hash="6e4bec581cece19361386d6124ddde90";let s=l},219077:function(e,t,n){n.d(t,{Z:()=>l});var i=n(667294);let o="undefined"!=typeof document?document:{},l=()=>{let e=(0,i.useRef)(),t=o.documentElement,{body:n}=o;return t?[()=>{if(!n||!n.style||e.current)return;let i=window.innerWidth-t.clientWidth,o=parseInt(window.getComputedStyle(n).getPropertyValue("padding-right"),10)||0;t.style.position="relative",t.style.overflow="hidden",n.style.position="relative",n.style.overflow="hidden",n.style.paddingRight=`${o+i}px`,e.current=!0},()=>{n&&n.style&&e.current&&(t.style.position="",t.style.overflow="",n.style.position="",n.style.overflow="",n.style.paddingRight="",e.current=!1)}]:[]}},291211:function(e,t,n){n.d(t,{Z:()=>a});var i=n(667294),o=n(514223),l=n(767415);class s extends i.PureComponent{constructor(...e){var t,n,i;super(...e),t="handleKeyDown",n=e=>{let{onClose:t,goToNext:n,goToPrevious:i}=this.props,s=e.keyCode||e.code;e.ctrlKey||e.metaKey||["input","select","button","textarea"].includes(((document.activeElement||{}).tagName||"").toLowerCase())||document.activeElement&&document.activeElement.isContentEditable||(s===o.Z.LEFT?(e.preventDefault(),e.stopPropagation(),i&&i(),(0,l.nP)("web_keydown_left")):s===o.Z.RIGHT?(e.preventDefault(),e.stopPropagation(),n&&n(),(0,l.nP)("web_keydown_right")):s===o.Z.ESCAPE&&(e.preventDefault(),e.stopPropagation(),t()))},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){return null}}let a=s},21558:function(e,t,n){n.d(t,{N:()=>d,d:()=>r});var i=n(667294),o=n(786482),l=n(213491),s=n(785893);let{Provider:a,useHook:r}=(0,l.Z)("Flag"),d=({children:e})=>{let[t,n]=(0,i.useState)(),[l,r]=(0,i.useState)(o.Zw.REPORT),[d,c]=(0,i.useState)(o.qb.STARTED),[m,u]=(0,i.useState)(),[h,_]=(0,i.useState)(),g=(0,i.useMemo)(()=>({flagReason:h,flow:l,status:d,selectedReason:m,modalTitle:t,setFlagReason:_,setFlow:r,setModalTitle:n,setStatus:c,setSelectedReason:u}),[t,l,d,m,h]);return(0,s.jsx)(a,{value:g,children:e})}},786482:function(e,t,n){n.d(t,{Vm:()=>l,Zw:()=>i,qb:()=>o});let i={REPORT:"REPORT",BLOCK:"BLOCK",END:"END"},o={STARTED:"STARTED",SELECTED:"SELECTED",SUBMITTED:"SUBMITTED",PROCESSING:"PROCESSING",COMPLETED:"COMPLETED"},l={CONVERSATION:"CONVERSATION",DID_IT:"DID_IT"}},992998:function(e,t,n){n.d(t,{Z:()=>a});var i=n(883119),o=n(583875),l=n(138596),s=n(785893);let a=({isQuestion:e,name:t,size:n,src:a})=>{let r=(0,l.ZP)();return(0,s.jsxs)(i.xu,{"data-test-id":"comment-avatar-container",position:"relative",children:[(0,s.jsx)(o.qE,{name:t,size:n,src:a}),e&&(0,s.jsxs)(i.xu,{alignItems:"center",bottom:!0,display:"flex",height:16,justifyContent:"center",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,width:16,children:[(0,s.jsx)(i.xu,{position:"absolute",children:(0,s.jsx)(i.JO,{accessibilityLabel:r.bt("Комментарии к вопросам и ответам", "Q and A comment", "comment.userAvatar.creator.q&aIndicator", undefined, true),color:"dark",icon:"speech"})}),(0,s.jsx)(i.xu,{position:"absolute",children:(0,s.jsx)(i.JO,{accessibilityLabel:r.bt("Комментарии к вопросам и ответам", "Q and A comment", "comment.userAvatar.creator.q&aIndicator", undefined, true),color:"light",icon:"question-mark",size:8})})]})]})}},548686:function(e,t,n){n.d(t,{f:()=>a,v:()=>r});var i=n(667294),o=n(213491),l=n(785893);let{Provider:s,useHook:a}=(0,o.Z)("CommentMedia");function r({children:e}){let[t,n]=(0,i.useState)({height:150,width:150}),[o,a]=(0,i.useState)(null),[r,d]=(0,i.useState)(null),[c,m]=(0,i.useState)(null),[u,h]=(0,i.useState)(""),_=()=>{a(null),d(null),m(null),h("")},g=(0,i.useCallback)(()=>_(),[]),p=(0,i.useMemo)(()=>({mediaDimensions:t,mediaId:r,mediaType:c,mediaUrl:u,photoFile:o,removeSelectedPhoto:g,setMediaDimensions:n,setMediaId:d,setMediaType:m,setMediaUrl:h,setPhotoFile:a}),[t,o,r,c,u,g]);return(0,l.jsx)(s,{value:p,children:e})}},453471:function(e,t,n){n.d(t,{Z:()=>ea});var i=n(883119),o=n(667294),l=n(581722),s=n(473727),a=n(219077),r=n(331128),d=n(21558),c=n(992998),m=n(138596),u=n(785893);let h=({color:e,isMarkedHelpful:t})=>{let n=(0,m.ZP)();return(0,u.jsx)(i.JO,{accessibilityLabel:n.bt("Полезно", "Helpful", "comment.button.helpful", undefined, true),color:t?"brandPrimary":e,icon:"thumbs-up",inline:!0,size:12})};var _=n(333651),g=n(773655),p=n(583875);let x={helpfulStyle:{backgroundImage:`url(${_})`},lovedStyle:{backgroundImage:`url(${g})`}},y=({response:e,handleReactionListHover:t,maybeDismissReactionListWithDelay:n})=>{let o=14===e.reaction_type,l=1===e.reaction_type,s=e.user.is_private_profile?e.user.first_name:e.user.full_name;return(0,u.jsxs)(i.kC,{alignItems:"center",children:[(0,u.jsx)(i.Tg,{href:`/${e.user.username}/`,onBlur:n,onFocus:t,children:(0,u.jsxs)(i.kC,{alignItems:"center",children:[(0,u.jsx)(i.xu,{maxWidth:40,children:(0,u.jsx)(p.qE,{accessibilityLabel:"",name:s,outline:!0,size:"sm",src:e.user.image_medium_url})}),(0,u.jsx)(i.xu,{marginStart:2,maxWidth:80,children:(0,u.jsx)(i.xv,{color:"inverse",size:"100",weight:"bold",children:s})})]})}),(0,u.jsxs)(i.xu,{alignContent:"end",display:"flex",padding:2,children:[l&&(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:x.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:16,width:16}),o&&(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:x.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:16,width:16})]})]})};var f=n(661376),b=n(462867),v=n(200619),j=n(601871);let P=["userreaction.id","userreaction.reaction_type","userreaction.user()","user.first_name","user.full_name","user.id","user.image_medium_url","user.is_private_profile","user.username"],w=({commentId:e,handleReactionListHover:t,isMarkedHelpfulByMe:n,isLovedByMe:l,isTry:s,maybeDismissReactionListWithDelay:a})=>{let r=(0,b.Z)(),d=(0,v.Z)(),c=(0,f.Z)({name:"ApiResource",options:{url:s?`/v3/did_it/${e}/reacted_by/`:`/v3/aggregated_comments/${e}/reacted_by/`,field_sets:P}}),m=(0,j.lJ)(r,d)||("id"in r&&r.id?r.id:""),h=c.data;(l||n)&&h&&(h=h.filter(e=>e.user.id!==m),h=[{id:e,reaction_type:l?1:14,user:{first_name:(0,j.Fk)(r,d),full_name:(0,j.Fk)(r,d),id:m,image_medium_url:(0,j.gJ)(r,d),is_private_profile:!!r.isAuth&&!!r.isPrivateProfile,username:(0,j.Ms)(r,d)}},...h]);let _=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let{current:e}=_,t=()=>{c.isFetching||(c.isAtEnd?e?.removeEventListener("scroll",t):c.fetchMore())};return e?.addEventListener("scroll",t),()=>{e?.removeEventListener("scroll",t)}},[c]),(0,u.jsx)(i.xu,{ref:_,color:"selected",maxHeight:140,overflow:"scroll",rounding:2,width:180,children:h?.map(e=>u.jsx(i.xu,{"data-test-id":"reaction-list-single-user",margin:3,children:u.jsx(y,{handleReactionListHover:t,maybeDismissReactionListWithDelay:a,response:e})},e.id))})};var A=n(825605),C=n(632492);let I=(0,o.lazy)(()=>n.e("22979").then(n.bind(n,674565))),S="comment-reaction-container-entry-point",T=({commentId:e,dismissReactionList:t,helpfulCount:n,inCommentRepRedesignExp:l,isMarkedHelpfulByMe:s,isLovedByMe:a,isReactionListOpen:r,isTry:d,lovedCount:c,onReactionCountHover:h,onToggleHelpful:p,onToggleLove:x})=>{let y=(0,m.ZP)(),f=(0,o.useRef)(null),b=l?12:16,[v,j]=(0,o.useState)(!1),P=!1,T=(c||0)+(n||0);s&&a&&(T-=1);let z=e=>()=>{j(e)},k=()=>{P=!0,h()},L=()=>{P=!1,setTimeout(()=>{P||t()},1e3)},E=l?(0,u.jsx)(i.xu,{"data-test-id":S,margin:-1.5,children:(0,u.jsx)(i.hU,{accessibilityLabel:y.bt("Отреагировать", "React", "comment.actionbar.react", undefined, true),icon:"heart-outline",onClick:x(!0),size:"xs"})}):(0,u.jsx)(i.xu,{"data-test-id":S,children:v?(0,u.jsx)(i.iP,{onMouseLeave:z(!1),onTap:z(!1),children:(0,u.jsx)(A.Z,{children:(0,u.jsx)(I,{setHelpful:p(!0),setLoved:x(!0)})})}):(0,u.jsx)(i.iP,{onMouseEnter:z(!0),onTap:z(!0),children:(0,u.jsx)(i.JO,{accessibilityLabel:y.bt("Отреагировать", "React", "comment.actionbar.react", undefined, true),color:"subtle",icon:"heart-outline",size:b})})});return(0,u.jsxs)(i.kC,{alignItems:"center",gap:{row:l?1.5:1,column:0},children:[s||a?(0,u.jsx)(i.iP,{onTap:()=>{p(!1)(),x(!1)()},children:(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${a?g:_})`,backgroundSize:"contain"}},"data-test-id":a?"comment-reaction-container-loved-emoji":"comment-reaction-container-helpful-emoji",height:b,width:b})}):E,T>0&&(0,u.jsxs)(o.Fragment,{children:[(0,u.jsx)(i.iP,{onMouseEnter:k,onMouseLeave:L,onTap:k,children:(0,u.jsx)(i.xu,{ref:f,"data-test-id":"comment-reaction-container-reaction-count",display:l?"flex":void 0,children:(0,u.jsx)(i.xv,{color:l?"default":"subtle",inline:!0,size:l?"100":"200",weight:"bold",children:T})})}),r&&(0,u.jsx)(i.mh,{zIndex:C.lI,children:(0,u.jsx)(i.J2,{anchor:f.current,idealDirection:"down",onDismiss:t,positionRelativeToAnchor:!1,children:(0,u.jsx)(i.iP,{onMouseEnter:k,onMouseLeave:L,children:(0,u.jsx)(w,{commentId:e,handleReactionListHover:k,isLovedByMe:a,isMarkedHelpfulByMe:s,isTry:d,maybeDismissReactionListWithDelay:L})})})})]})]})};var z=n(458465),k=n(812928),L=n(634395),E=n(351979),R=n(299136);function D(e){let{comment:t,commentTags:n,handlePhotoTap:l,inCommentRepRedesignExp:s,isDesktop:a,previewPhoto:r,taggedUsers:d}=e,[c,m]=(0,o.useState)(!1),{user:{username:h}}=t,_="text"in t?t.text:t.details,g=s?_:`${h} ${_}`,{height:p,url:x,width:y}=r||{},f=p??E.Vb,b=y??E.mu;return(0,u.jsxs)(i.xu,{children:[(0,u.jsx)(R.Z,{isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:d,tags:n,text:g}),a||s?(0,u.jsx)(i.xu,{marginBottom:s?1.5:void 0,marginTop:s?.5:1,children:(0,u.jsx)(E.ZP,{canEnlargePhoto:a,isSelectedPhoto:!1,previewPhoto:r})}):(0,u.jsx)(i.xu,{height:150,marginBottom:a?4:2,marginTop:1,width:150,children:(0,u.jsx)(i.iP,{disabled:!a,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onTap:l,children:(0,u.jsx)(i.zd,{rounding:2,wash:!0,children:x&&(0,u.jsx)(i.Ee,{alt:x,color:"#efefef",naturalHeight:f,naturalWidth:b,src:x,children:(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{cursor:a?"zoom-in":void 0,backgroundColor:`rgba(17, 17, 17, ${c?.4:0})`}},height:"100%",width:"100%"})},x)})})})]})}var O=n(351736),Z=n(216975),M=n(264267),N=n(438274);function H(e){let{shouldPreviewNewReply:t,featuredCommentId:n,parentId:s,parentType:a,inCommentRepRedesignExp:r,isDesktop:d,isLoading:c,isReadOnly:h,openOverflowMenu:_,replyingToCommentId:g,toggleHelpful:p,toggleLike:x,toggleReplyComposer:y,isORBACProfileManager:f,isVideo:b,storyPinDataId:v,pinId:j,closeupAttributionId:P,aggregatedPinDataId:w,closeupAttributionUsername:A,pinnerId:C,reactionListCommentId:I,showReactionListForComment:S,viewParameter:T}=e,z=(0,m.ZP)(),k=(0,O.vs)(),L=(0,M.lV)(),E=(0,l.v9)(({feeds:e})=>{let n=e[`${N.Z.AGGREGATED_COMMENT_REPLIES}:${s}`]||[],i=e[`${N.Z.AGGREGATED_COMMENTS}:${s}`]||[];return n.concat(i).reduceRight((e,{id:n})=>{let i=L[n];return i?t?[i,...e]:[...e,i]:e},[])}),[R,D]=(0,o.useState)(1),H=R===E.length;return(0,u.jsxs)(o.Fragment,{children:[E.length>1&&(0,u.jsx)(i.iP,{onTap:()=>{D(H?0:E.length)},children:(0,u.jsxs)(i.xu,{alignItems:r?"center":void 0,display:r?"flex":void 0,marginBottom:r?6:4,children:[r?(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{background:k?"white":"black"}},height:1,marginEnd:2,width:32}):(0,u.jsx)(i.xu,{display:"inlineBlock",marginEnd:2,children:(0,u.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:"⎯⎯"})}),(0,u.jsx)(i.xv,{color:r?"default":"subtle",inline:!0,size:"100",weight:"bold",children:H?z.bt("Скрыть ответы", "Hide replies", "comment.button.hideReplies", undefined, true):(0,Z.nk)(z.nbt(["Просмотреть {{ commentCount }} ответ", "Просмотреть {{ commentCount }} ответа", "Просмотреть {{ commentCount }} ответов"], E.length, "comment.button.showReplies", true),{commentCount:E.length})})]})}),(0,u.jsx)(ea,{aggregatedPinDataId:w,closeupAttributionId:P,closeupAttributionUsername:A,comments:E.slice(0,R),commentsDisabled:!1,featuredCommentId:n,gapSize:r?6:2,inCommentRepRedesignExp:r,isDesktop:d,isLoading:c,isORBACProfileManager:f,isReadOnly:h,isVideo:b,openOverflowMenu:_,parentId:s,parentType:a,pinId:j,pinnerId:C,reactionListCommentId:I,replyingToCommentId:g,showReactionListForComment:S,storyPinDataId:v,toggleHelpful:p,toggleLike:x,toggleReplyComposer:y,userAvatarSize:"sm",viewParameter:T})]})}var F=n(230201),B=n(236269),U=n(924591),W=n(995514),G=n(424868),K=n(774838),$=n(233597),V=n(577356),q=n(107889),J=n(133546),Q=n(872003),Y=n(858254),X=n(426130),ee=n(826681),et=n(271245);let en=(0,o.lazy)(()=>n.e("8184").then(n.bind(n,265994))),ei=(0,et.Z)(()=>n.e("73842").then(n.bind(n,715490)),void 0,e=>715490,"app-packages-comment-CommentOverflowPopover"),eo=(0,o.lazy)(()=>n.e("90658").then(n.bind(n,167446)));function el(e){let t,n;let{aggregatedPinDataId:_,shouldPreviewNewReply:g,closeupAttributionId:p,closeupAttributionUsername:x,comment:y,featuredCommentId:f,inCommentRepRedesignExp:P,isDesktop:w,isReadOnly:C,isVideo:I,openOverflowMenu:S,toggleReplyComposer:E,parentId:N,parentType:et=q.o.pin,pinId:el,storyPinDataId:es,replyingToCommentId:ea,showReactionListForComment:er,showTopCommentHeading:ed,toggleHelpful:ec,toggleLike:em,userAvatarSize:eu,isORBACProfileManager:eh,pinnerId:e_,reactionListCommentId:eg,viewParameter:ep}=e,{user:{id:ex,first_name:ey,id:ef,image_medium_url:eb,username:ev},id:ej,is_translatable:eP,comment_count:ew,helpful_count:eA,tags:eC=[]}=y,[eI,eS]=(0,o.useState)(!1),eT=eI&&y.translatedText||y.text,ez=!eP||""===y.translatedText,ek=!1,eL=0,eE=!1,eR=!!y.marked_helpful_by_me,eD=P?[]:[y.user],eO="",eZ=new Date;"aggregatedcomment"===y.type?(ek=y.highlighted_by_pin_owner,eL=y.reaction_counts[1],eE=y.reaction_by_me>0,n=y?.media?.sticker,eD.push(...y.tagged_users),eO=P?eT??"":`${ev} ${eT??""}`,eZ=new Date(y.created_at)):(eL=y.like_count,eE=y.liked_by_me,t=y.images[0]||{},eO=P?y.details:`${ev} ${y.details}`,eZ=new Date(y.done_at));let eM=t?.["150x150"],eN=t?.originals,eH=n||eN,eF=(0,m.ZP)(),eB=(0,b.Z)(),{setIsMediaViewerOpen:eU,clientTrackingParams:eW}=(0,J.x4)(),{logContextEvent:eG}=(0,F.v)(),{country:eK,countryFromIp:e$,isBot:eV}=(0,K.B)(),{showToast:eq}=(0,V.F9)(),eJ=(0,l.I0)(),eQ=(0,O.vs)(),eY=(0,o.useRef)(null),eX=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","EU"].includes(eK),{COUNTRY_CODES:e0}=Y.a0.india||{},e1=e$&&e0&&e0.includes(e$),e2=!C||e1||eX,e6="aggregatedcomment"===y.type&&1===y.comment_tag,e9=e6&&!P,e3=(0,v.Z)(),e4=(0,j.lJ)(eB,e3),{nativeEngagementsHiddenForUser:e8}=(0,Q.G)(),{aggregatedCommentsHiddenForUser:e7,translateAggregatedComment:e5,updateAggregatedComment:te}=(0,M.nf)(),tt=(0,r.Z)(),tn="userdiditdata"===y.type,ti=(0,W.Z)(),to=eP&&!1,tl=w||P?eN:eM,ts=(0,z.zs)(ev,eC,eQ,P),ta={SHOW_TRANSLATION:eF.bt("Просмотреть перевод", "Show translation", "comment.translateButton.showTranslation", undefined, true),TRANSLATING:eF.bt("Выполняется перевод…", "Translating...", "comment.translateButton.translating", undefined, true),SHOW_ORIGINAL:eF.bt("Показать оригинал", "Show original", "comment.translateButton.showOriginal", undefined, true)},tr=(0,o.useRef)(ta.SHOW_TRANSLATION),[td,tc]=(0,a.Z)(),[tm,tu]=(0,o.useState)(!1),[th,t_]=(0,o.useState)(!1),[tg,tp]=(0,o.useState)(!1),[tx,ty]=(0,o.useState)(!1),[tf,tb]=(0,o.useState)(!1),[tv,tj]=(0,o.useState)(!1),[tP,tw]=(0,o.useState)(!1),[tA,tC]=(0,o.useState)(z.A9.NONE),tI=e=>()=>{t_(e)};(0,o.useEffect)(()=>{to&&eG({event_type:10416,view_type:3,view_parameter:ep,component:"pin"===et?13696:13697})},[eG,et,to,ep]),(0,o.useEffect)(()=>{ew>0&&!eV&&eJ((0,$.U)("aggregatedcomment"===y.type?"AggregatedCommentReplyFeedResource":"DidItCommentsResource",{options:{isUnifiedComment:!0,objectId:ej,redux_normalize_feed:!0}}))},[y.type,ej]);let tS=et.toLowerCase()===q.o.aggregatedComment.toLowerCase()||et.toLowerCase()===q.n.didIt.toLowerCase(),tT=y.user.first_name||"",tz=async({contentMarkdown:e,force:t,tags:n})=>{let i,o;ty(!0);let l=y.id;if(tS&&(i=et.toLowerCase()===q.n.didIt,l=N,o=y.id),l)try{await tt({force:t,fromUnifiedComment:!0,objectType:tn||i?q.o.didIt:q.o.aggregatedComment,objectId:l,orbacSubjectId:e4,tags:n,text:e,replyToCommentId:o})}catch(t){let e=(0,B.Z)(t,"code");if([G.ky,G.LJ].includes(e??0)&&w)return tC(e===G.ky?z.A9.WARNING:z.A9.BLOCK),ty(!1),!1}return E&&E(void 0),ty(!1),!0},tk=async({contentMarkdown:e,force:t,tags:n})=>{tp(!0);try{tn?await eJ((0,X.IU)({id:y.id,details:e,pinId:el??"",image_signatures:"image_signatures"in y&&y.image_signatures?y.image_signatures:[]})):await te({commentId:y.id,force:t,orbacSubjectId:e4,tags:n,text:e})}catch(e){if([G.ky,G.LJ].includes((0,B.Z)(e,"code")??0)&&w)return tC(e.code===G.ky?z.A9.WARNING:z.A9.BLOCK),tp(!1),!1}return t_(!1),tp(!1),!0},tL=()=>{w?tu(!tm):S&&S(y,{showIndiaLawReporting:!!e1,showNetzDGReporting:!!eX})},tE=e=>()=>{tu(e),tw(e),e||eG({component:14349,event_type:9408})},tR=()=>{tC(z.A9.NONE)},tD=e=>{e?tc():td(),eU(!e),tb(!e)},tO=()=>{eI||y.translatedText||e5(y.id),eI||tr.current!==ta.SHOW_TRANSLATION?eI&&tr.current===ta.SHOW_ORIGINAL&&eG({event_type:10418,view_type:3,view_parameter:ep,component:"pin"===et?13696:13697}):eG({event_type:10417,view_type:3,view_parameter:ep,component:"pin"===et?13696:13697}),eS(!eI)};(0,o.useEffect)(()=>{eI&&ez&&(eS(!eI),eq(({hideToast:e})=>(0,u.jsx)(U.Z,{onHide:e,text:eF.bt("Ошибка: не удалось перевести", "Error - couldn't translate", "comment.couldNotTranslate.toast", undefined, true),type:"error"})))},[eI,ez]),eI?tr.current=y.translatedText?ta.SHOW_ORIGINAL:ta.TRANSLATING:tr.current=ta.SHOW_TRANSLATION;let tZ=w?128:110,tM="aggregatedcomment"===y.type&&y.media?.sticker?.image_url&&(0,u.jsx)(i.xu,{height:tZ,marginBottom:w?1:0,marginTop:1,width:tZ,children:y.media?.sticker?.image_url&&(0,u.jsx)(i.Ee,{alt:y.media?.sticker?.display_name??"",fit:"contain",naturalHeight:0,naturalWidth:0,src:y.media.sticker.image_url})});return(0,u.jsxs)(o.Fragment,{children:[(0,u.jsx)(i.xH,{accessibilityLabel:"Loading comment",show:tg}),!th&&!tg&&(0,u.jsxs)(i.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(i.xu,{marginEnd:2,children:(0,u.jsx)(s.rU,{to:`/${ev}/`,children:(0,u.jsx)(c.Z,{isQuestion:e9,name:ey||ev||"",size:eu,src:eb??""})})}),(0,u.jsxs)(i.kC,{direction:"column",flex:"grow",justifyContent:"start",children:[(0,u.jsxs)(i.kC,{justifyContent:"between",children:[(0,u.jsx)(i.kC.Item,{minWidth:0,children:(0,u.jsxs)(i.kC,{dataTestId:"author-and-comment-container",direction:"column",children:[P&&(0,u.jsxs)(i.kC,{alignItems:"center",gap:{row:1,column:0},children:[(0,u.jsx)(R.Z,{isFirstTaggedUserAuthor:!0,lineHeight:"14px",marginEnd:0,shouldShowFirstNameOnly:!0,size:"100",taggedUsers:[y.user],tags:(0,z.zs)(ev,[],eQ),text:ev}),e6&&!ed&&(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:"14px"}},children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",children:eF.bt("задает вопрос 👀", "asked a question 👀", "comment.question.label", undefined, true)})}),ed&&(0,u.jsxs)(i.kC,{children:[(0,u.jsx)(i.xu,{alignItems:"center",display:"flex",marginEnd:1,children:(0,u.jsx)(i.JO,{accessibilityLabel:(0,z.yW)(eF),color:"recommendation",icon:"star",size:12})}),(0,u.jsx)(i.xv,{color:"recommendation",size:"100",weight:"bold",children:(0,z._q)(eF)})]}),(e6||ed)&&eZ&&(0,u.jsx)(i.xv,{color:"subtle",size:"100",children:"\xb7"}),eZ&&(0,u.jsx)(i.xu,{"data-test-id":"comments-time-passed",children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",children:ti(eZ,!0)})})]}),tn?(0,u.jsx)(D,{comment:y,commentTags:ts,handlePhotoTap:()=>tD(tf),inCommentRepRedesignExp:P,isDesktop:w,previewPhoto:tl,taggedUsers:eD}):(0,u.jsx)(R.Z,{isFirstTaggedUserAuthor:!P,lineHeight:P?"21px":void 0,marginBottom:P?"4px":void 0,shouldShowFirstNameOnly:!0,taggedUsers:eD,tags:ts,text:eO}),tM,to&&(0,u.jsx)(i.xu,{marginBottom:2,marginTop:2,children:(0,u.jsx)(i.iP,{onTap:()=>tO(),children:(0,u.jsx)(i.xv,{color:"subtle",size:"300",weight:"bold",children:tr.current})})})]})}),f===ej&&(0,u.jsx)(i.xu,{alignSelf:"center",color:"primary",height:8,minWidth:8,rounding:"pill"})]}),ek&&(0,u.jsx)(i.xu,{marginBottom:P?1.5:3,marginTop:P?-.5:4,children:(0,u.jsx)(i.xv,{size:"100",children:(0,Z.nk)(eF.bt("Пользователь, который выделил комментарий: @{{ closeupAttributionUsername }}", "Highlighted by @{{ closeupAttributionUsername }}", "comment.highlighted.label", undefined, true),{closeupAttributionUsername:x})})}),e2&&(0,u.jsxs)(i.xu,{alignItems:"center",display:"flex",height:w?25:"100%",justifyContent:"between",position:"relative",children:[(0,u.jsxs)(i.kC,{alignItems:"center",gap:{row:P?4:5,column:0},children:[!C&&!P&&(0,u.jsx)(i.xu,{"data-test-id":"comments-time-passed",children:(0,u.jsx)(i.xv,{color:"subtle",size:"200",children:ti(eZ,!0)})}),!C&&(0,u.jsx)(i.xu,{"data-test-id":"comment-reply-button-container",children:(0,u.jsx)(i.iP,{onTap:()=>{E&&E(y,N,et)},children:(0,u.jsx)(i.xv,{color:P?"default":"subtle",size:P?"100":"200",weight:"bold",children:eF.bt("Ответить", "Reply", "comment.button.reply", undefined, true)})})}),!C&&(w||P?(0,u.jsx)(T,{commentId:ej,dismissReactionList:()=>{er(void 0)},helpfulCount:eA,inCommentRepRedesignExp:P,isLovedByMe:eE,isMarkedHelpfulByMe:eR,isReactionListOpen:eg===ej,isTry:tn,lovedCount:eL,onReactionCountHover:()=>{er(ej),eG({event_type:9906,component:"pin"===et?13696:13697,view_type:3,view_parameter:ep})},onToggleHelpful:e=>()=>{eR!==e&&ec(ej,!e,tn)()},onToggleLove:e=>()=>{eE!==e&&em(ej,!e,tn)()}}):(0,u.jsxs)(i.xu,{alignItems:"center","data-test-id":"reactions-likeWithCountButton",display:"flex",children:[(0,u.jsx)(i.hU,{accessibilityLabel:eF.bt("Нравится", "Like", "comment.button.like", undefined, true),icon:"heart",iconColor:eE?"red":"gray",onClick:em(ej,eE,tn),size:"xs"}),eL>0&&(0,u.jsx)(i.xu,{"data-test-id":"love-count-container",children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",weight:"bold",children:eL})})]})),!("id"in eB&&eB.id===ef&&e6)&&(P?(0,u.jsx)(i.iP,{onTap:tL,children:(0,u.jsx)(i.JO,{accessibilityLabel:eF.bt("Еще", "More", "comment.button.more", undefined, true),color:eQ?"light":"dark",icon:"ellipsis",size:12})}):(0,u.jsx)(i.xu,{ref:eY,"data-test-id":"comment-more-options",children:(0,u.jsx)(i.hU,{accessibilityLabel:eF.bt("Еще", "More", "comment.button.more", undefined, true),icon:"ellipsis",iconColor:"gray",onClick:tL,size:"xs"})}))]}),!C&&!eh&&!w&&!P&&(0,u.jsx)(i.xu,{marginStart:6,children:(0,u.jsx)(i.iP,{fullWidth:!1,onTap:ec(ej,eR,tn),children:(0,u.jsxs)(i.kC,{alignItems:"center",dataTestId:"helpful-reaction",gap:{row:1,column:0},height:"100%",children:[(0,u.jsx)(h,{color:"subtle",isMarkedHelpful:eR}),(0,u.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:eF.bt("Полезно", "Helpful", "comment.button.helpful", undefined, true)}),eA>0&&(0,u.jsx)(i.xu,{"data-test-id":"helpful-count-container",children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",weight:"bold",children:eA})})]})})})]})]})]}),w&&(0,u.jsxs)(o.Fragment,{children:[th&&(0,u.jsx)(i.xu,{marginTop:3,children:(0,u.jsx)(k.Z,{clientTrackingParams:eW,commentWarningModalState:tA,dismissCommentWarningModal:tR,initialTags:y.tags,initialText:"aggregatedcomment"===y.type?y.text:y.details,isEditing:!0,objectType:q.o.aggregatedComment,onAddItem:tk,onCancelItem:tI(!1),postedPhoto:eH,showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:ep})}),ea===ej&&(0,u.jsx)(i.xu,{marginStart:tS?0:12,marginTop:3,children:(0,u.jsx)(k.Z,{commentWarningModalState:tA,dismissCommentWarningModal:tR,initialTags:tS?[{offset:0,object_id:ex,length:tT.length,tag_type:1}]:[],initialText:tS?`${tT} `:"",isReplying:!0,objectType:q.o.aggregatedComment,onAddItem:tz,onCancelItem:()=>{E&&E()},showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:ep})})]}),(ew>0||tx)&&(0,u.jsx)(i.xu,{marginStart:P?10:12,marginTop:P?3:4,children:(0,u.jsx)(H,{aggregatedPinDataId:_,closeupAttributionId:p,closeupAttributionUsername:x,featuredCommentId:f,inCommentRepRedesignExp:P,isDesktop:w,isLoading:tx,isORBACProfileManager:eh,isReadOnly:C,isVideo:I,openOverflowMenu:S,parentId:ej,parentType:y.type,pinId:el,pinnerId:e_,reactionListCommentId:eg,replyingToCommentId:ea,shouldPreviewNewReply:g,showReactionListForComment:er,storyPinDataId:es,toggleHelpful:ec,toggleLike:em,toggleReplyComposer:E,viewParameter:ep})}),w&&e2&&(0,u.jsx)(ei,{aggregatedPinDataId:_,anchor:eY.current,closeupAttributionId:p,comment:y,dismiss:e=>{tu(!1),e||eG({component:14349,event_type:10128})},isOpen:tm,isReply:tS,onEdit:tI(!0),onShowBlockUserModal:tE(!0),parentId:N,pinId:el,pinnerId:e_,showIndiaLawReporting:!!e1,showNetzDGReporting:eX}),tv&&(0,u.jsx)(A.Z,{children:(0,u.jsx)(d.N,{children:(0,u.jsx)(eo,{aggregatedPinDataId:_,didItDataId:ej,onClose:e=>()=>{tj(!e)},pinId:el??"",username:ev,users:[y.user]})})}),tP&&(0,u.jsx)(A.Z,{children:(0,u.jsx)(en,{firstName:ey??"",onBlockUser:()=>{eJ((0,ee.Ge)({id:ex,orbacSubjectId:e4,blockSource:"comment",blockContext:ej,logContextEvent:eG})),e7(ex),e8(ex),eG({event_type:101,component:13712,element:87,view_type:220,aux_data:{creator_id:eB.isAuth?eB.id:null}}),eG({component:14349,event_type:9407}),tw(!1),eq(({hideToast:e})=>(0,u.jsx)(U.Z,{onHide:e,text:(0,Z.nk)(eF.bt("Вы заблокировали пользователя {{ username }}", "You've blocked {{ username }}", "comment.blockAuthor.toast", undefined, true),{username:ev}).join("")}))},onClearModal:tE(!1)})}),!!eN&&tf&&(0,u.jsx)(L.Z,{onDismiss:()=>tD(tf),photo:eN})]})}var es=n(79271);function ea(e){let t;let{aggregatedPinDataId:n,shouldPreviewNewReply:o,comments:l,commentsDisabled:s,commentsScrollContainerRef:a,featuredCommentId:r,gapSize:d=6,inCommentPopover:c,inCommentRepRedesignExp:h,isDesktop:_,isLoaded:g=!1,isLoading:p=!1,isReadOnly:x,openOverflowMenu:y,toggleReplyComposer:f,parentId:v,parentType:j,replyingToCommentId:P,showingCloseupCommentModule:w,toggleHelpful:A,toggleLike:C,userAvatarSize:I,isORBACProfileManager:S,isVideo:T,storyPinDataId:z,pinId:k,closeupAttributionId:L,closeupAttributionUsername:E,pinnerId:R,showReactionListForComment:D,reactionListCommentId:O,viewParameter:Z}=e,M=(0,m.ZP)(),N=(0,b.Z)(),{closeupWithinMasonryEnabled:H,isCloseupRelatedPinsAboveTheFoldEnabled:F}=(0,J.x4)(),B=N.isAuth||_?M.bt("У вас еще нет комментариев. Добавьте комментарий, чтобы начать обсуждение.", "No comments yet! Add one to start the conversation.", "commentThread.emptyState.message", undefined, true):M.bt("У вас еще нет комментариев.", "No comments yet!", "commentThread.emptyState.unauthMessage", undefined, true),U=!!w&&!1;return(t=z?"story":T?"video":"pin",s)?(0,u.jsx)(i.xu,{alignSelf:"center","data-test-id":"comments-disabled-label",marginTop:H?2:void 0,width:"100%",children:(0,u.jsx)(i.xv,{align:_?"start":"center",color:"subtle",children:M.bt("Комментарии для этого пина отключены", "Comments are turned off for this Pin", "commentThread.disabledState.message", undefined, true)})}):l.length>0?(0,u.jsxs)(i.xu,{ref:a,dangerouslySetInlineStyle:{__style:{gap:`${4*d}px 0`,scrollbarGutter:H?"stable":void 0,paddingTop:H?"8px":void 0}},"data-test-id":"aggregated-comment-list",direction:"column",display:"flex",maxHeight:H&&!c?722:"100%",overflow:H?"auto":void 0,width:"100%",children:[l.map((e,l)=>(0,u.jsx)(es.F,{componentType:"pin"===j?13696:13697,impressionAuxFields:{commentId:e.id,pinId:k,pinOwnerUserId:L,pinType:t,parentId:v,parentType:j,commentType:"aggregatedComment"},impressionType:"Comment",loggingId:e.id,slotIndex:l,viewType:_?3:98,children:({impressionTrackerRef:t})=>(0,u.jsx)(i.xu,{ref:t,"data-test-id":"commentThread-comment",tabIndex:0,children:(0,u.jsx)(el,{aggregatedPinDataId:n,closeupAttributionId:L,closeupAttributionUsername:E,comment:e,featuredCommentId:r,inCommentRepRedesignExp:h,isDesktop:_,isORBACProfileManager:S,isReadOnly:x,isVideo:T,openOverflowMenu:y,parentId:v,parentType:j,pinId:k,pinnerId:R,reactionListCommentId:O,replyingToCommentId:P,shouldPreviewNewReply:o,showReactionListForComment:D,showTopCommentHeading:U&&0===l,storyPinDataId:z,toggleHelpful:A,toggleLike:C,toggleReplyComposer:f,userAvatarSize:I,viewParameter:Z})})},e.id)),p&&(0,u.jsx)(i.xH,{accessibilityLabel:M.bt("Загрузка комментариев", "Comments loading", " - ", undefined, true),show:p})]}):(0,u.jsxs)(i.xu,{alignSelf:"center",width:"100%",children:[(0,u.jsx)(i.xH,{accessibilityLabel:M.bt("Загрузка комментариев", "Comments loading", " - ", undefined, true),show:p}),g&&!F&&(0,u.jsx)(i.xv,{align:_?"start":"center",color:"subtle",children:B})]})}},812928:function(e,t,n){n.d(t,{Z:()=>r});var i=n(667294),o=n(548686),l=n(317109),s=n(785893);let a=(0,i.lazy)(()=>Promise.all([n.e("89558"),n.e("65393"),n.e("45474")]).then(n.bind(n,269936)));function r(e){return(0,s.jsx)(l.Z,{fallback:null,children:(0,s.jsx)(o.v,{children:(0,s.jsx)(a,{...e})})})}},634395:function(e,t,n){n.d(t,{Z:()=>r});var i=n(883119),o=n(291211),l=n(289935),s=n(138596),a=n(785893);function r({onDismiss:e,photo:t}){let n=(0,s.ZP)(),{height:r,url:d,width:c}=t,m=Math.min(r??936,936),u="100vh",h=n.bt("Закрыть средство просмотра медиафайлов", "Close media viewer", "comments.photo.mediaViewer.close", undefined, true);return(0,a.jsxs)(i.mh,{zIndex:l.b7,children:[(0,a.jsx)(i.iP,{mouseCursor:"zoomOut",onTap:e,children:(0,a.jsxs)(i.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.8)"}},"data-test-id":"comment-media-viewer",display:"flex",height:u,justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,width:"100%",children:[(0,a.jsx)(i.xu,{left:!0,padding:5,position:"absolute",top:!0,children:(0,a.jsx)(i.hU,{accessibilityLabel:h,icon:"cancel",iconColor:"white",onClick:e,padding:3,size:"lg"})}),(0,a.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{margin:"0 84px"}},height:u,maxHeight:m,width:c,children:d&&(0,a.jsx)(i.Ee,{alt:d??"",fit:"contain",naturalHeight:r??1,naturalWidth:c??1,src:d},d)})]})}),(0,a.jsx)(o.Z,{onClose:e})]})}},351979:function(e,t,n){n.d(t,{Vb:()=>_,ZP:()=>x,mu:()=>g});var i=n(667294),o=n(883119),l=n(219077),s=n(458465),a=n(55806),r=n(634395),d=n(138596),c=n(774838),m=n(739405),u=n(133546),h=n(785893);let _=150,g=346,p=e=>new Promise((t,n)=>{let i=new Image;i.onload=()=>{t({width:i.width,height:i.height})},i.onerror=n,i.src=e});function x({canEnlargePhoto:e,containerWidth:t,isSelectedPhoto:n,previewPhoto:x,removeSelectedPhoto:y}){let f=(0,d.ZP)(),b=(0,m.HG)(),{isRTL:v}=(0,c.B)(),{setIsMediaViewerOpen:j}=(0,u.x4)(),[P,w]=(0,l.Z)(),[A,C]=(0,i.useState)(!1),[I,S]=(0,i.useState)(!1),[T,z]=(0,i.useState)(null),[k,L]=(0,i.useState)(s.WU),E=(0,a.Z)(x)?x?.url:x?.image_url;(0,i.useEffect)(()=>{(async()=>{E&&!(0,a.Z)(x)&&z(await p(E))})()},[E,x]);let R=(0,a.Z)(x)?x?.width:T?.width,D=(0,a.Z)(x)?x?.height:T?.height,O=R??0,Z=D??0,M=E??"",N=Math.min((t||(b?g:312))/O,(b?_:110)/Z,1),H=f.bt("Удалить фото", "Remove photo", "photoCommentPreview.removePhoto", undefined, true),F=f.bt("Фотография", "Photo", "photoCommentPreview.previewPhoto", undefined, true),B=e=>{e?w():P(),j(!e),C(!e)};return(0,h.jsxs)(o.xu,{height:N*Z,marginTop:n?3:0,position:"relative",width:N*O,children:[(0,h.jsx)(o.iP,{disabled:!e,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),onTap:()=>B(A),children:(0,h.jsx)(o.zd,{rounding:2,children:M&&(0,h.jsx)(o.Ee,{alt:F,color:k,naturalHeight:Z,naturalWidth:O,onLoad:()=>{L(s.o),n&&URL.revokeObjectURL(M)},src:M,children:e&&(0,h.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{cursor:"zoom-in",backgroundColor:`rgba(17, 17, 17, ${I?.4:0})`}},height:"100%",width:"100%"})},F)})}),n&&(0,h.jsx)(o.xu,{alignItems:"center",display:"flex",height:24,justifyContent:"center",left:v,marginEnd:-3,marginTop:-3,position:"absolute",right:!v,top:!0,width:24,children:(0,h.jsx)(o.hU,{accessibilityLabel:H,bgColor:"lightGray",icon:"cancel",onClick:y,size:"xs"})}),A&&(0,h.jsx)(r.Z,{onDismiss:()=>B(A),photo:x})]})}},299136:function(e,t,n){n.d(t,{Z:()=>s});var i=n(667294),o=n(883119),l=n(785893);let s=({inCommentFeedPreview:e,isFirstTaggedUserAuthor:t,lineHeight:n,marginBottom:s,marginEnd:a,shouldShowFirstNameOnly:r,size:d,tags:c,taggedUsers:m,text:u})=>{let h=(0,i.useRef)(null),_=(e,t)=>(0,l.jsx)(o.xv,{inline:!0,overflow:"normal",size:d,children:(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:n,overflowWrap:"anywhere",display:"inline"}},"data-test-id":"text-container",children:e})},t),g=(n,i,s,a)=>{let c=r||0===s&&t?m[s].first_name||m[s].username[0]:i;return(0,l.jsx)(o.xv,{color:n,inline:!0,overflow:"normal",size:d,weight:"bold",children:e?c:(0,l.jsx)(o.rU,{display:"inlineBlock",href:`/${m[s].username}`,underline:"hover",children:c})},a)};return(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap",wordWrap:"break-word",marginBottom:s}},children:(()=>{if(!c.length||!m||c.length!==m.length)return _(u,"1");let t=0,i=[];return c.forEach((e,n)=>{let o=u.substring(t,e.offset);t=e.offset+e.length;let l=u.substring(e.offset,t);i=i.concat(_(o,`${n}a`)).concat(g(e.color,l,n,`${n}b`))}),i=i.concat(_(u.substring(t),"2")),(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:n}},display:r?"flex":void 0,marginEnd:a??3,position:"relative",children:(0,l.jsx)(o.xv,{ref:h,inline:!0,lineClamp:e?1:void 0,size:d,children:i})})})()})}},458465:function(e,t,n){n.d(t,{A9:()=>u,F1:()=>j,Ff:()=>v,G5:()=>P,G_:()=>b,LH:()=>l,Rv:()=>r,TJ:()=>c,WU:()=>g,_q:()=>I,i$:()=>p,iB:()=>o,je:()=>s,mi:()=>w,mz:()=>f,o:()=>_,pW:()=>m,qJ:()=>S,ql:()=>h,sp:()=>A,uC:()=>a,xA:()=>d,yQ:()=>C,yW:()=>y,zs:()=>x});var i=n(696749);let o=48,l=56,s="sm",a=500,r=Object.freeze({TOP:0,REPLY_TO_TRIED:1,REPLY_TO_AGGREGATED:2}),d=Object.freeze({PHOTO:0,STICKER:1,PIN:2}),c="comment_featured_ids",m="did_it_featured_ids",u={NONE:"none",WARNING:"warning",BLOCK:"block"},h="https://s.pinimg.com/images/user/default_75.png",_="transparent",g="#efefef",p=(e,t)=>e?(0,i.Z)(t.nbt(["{{ count }} комментарий", "{{ count }} комментария", "{{ count }} комментариев"], e, "closeup.commentThread.heading.commentCount", true),{count:e.toString()}):t.bt("У вас еще нет комментариев", "No comments yet", "closeup.commentThread.heading.noComments", undefined, true),x=(e,t,n,i)=>{let o=t.map(t=>({...t,offset:(t.offset||0)+(i?0:e.length+1),color:"shopping"}));return i?o:[{offset:0,length:e.length,color:n?"light":"dark"},...o]},y=e=>e.bt("Значок заголовка статистики", "Insight heading icon", "closeupCommentModuleHeading.icon", undefined, true),f=e=>e.bt("Добавьте комментарий, чтобы начать обсуждение", "Add one to start the conversation", "closeup.commentThread.emptyState.message", undefined, true),b=e=>e.bt("Опубликовать", "Post", "commentComposer.button.post", undefined, true),v=e=>e.bt("публикует фотографию", "posted a photo", "comment.preview.text.photo", undefined, true),j=e=>e.bt("публикует наклейку", "posted a sticker", "comment.preview.text.sticker", undefined, true),P=e=>e.bt("Выбрать эмодзи", "Select an emoji", "emojitray.button.accessibilityLabel", undefined, true),w=e=>e.bt("Выберите фото.", "Select a photo", "photoModal.button.accessibilityLabel", undefined, true),A=e=>e.bt("Выбор наклейки", "Select a sticker", "stickerTray.button.accessibilityLabel", undefined, true),C=e=>e.bt("Текстовый редактор", "Text editor", "EditorWithMentions.container", undefined, true),I=e=>e.bt("Лучший комментарий", "Top Comment", "closeupCommentModuleHeading.heading.topComment", undefined, true),S=e=>[P(e),w(e),b(e),A(e),C(e)]},55806:function(e,t,n){n.d(t,{Z:()=>i});let i=e=>e?.url!==void 0},632492:function(e,t,n){n.d(t,{Cq:()=>d,Dk:()=>m,Fk:()=>o,fS:()=>r,km:()=>c,lI:()=>l,mS:()=>a,qW:()=>s});var i=n(883119);let o=new i.Ry(1),l=new i.Ry(3),s=2,a=new i.Ry(s),r=3,d=4,c=new i.Ry(5),m=new i.Ry(100)},624333:function(e,t,n){n.d(t,{B:()=>P,Z:()=>C});var i,o=n(667294),l=n(581722);n(167912);var s=n(616550),a=n(883119),r=n(453471),d=n(907022),c=n(661376),m=n(739405),u=n(893957),h=n(462867),_=n(200619),g=n(601871),p=n(264267),x=n(107889),y=n(301527),f=n(426130),b=n(646239),v=n(157498),j=n(785893);let P=({aggregatedPinDataId:e,featuredCommentIds:t,featuredDidItIds:n,isDesktop:i,isReversed:o=!1,noCache:l=!1,orbacSubjectId:s=""})=>({name:"UnifiedCommentsResource",options:{aggregated_pin_id:e,comment_featured_ids:t,did_it_featured_ids:n,page_size:i?10:25,redux_normalize_feed:!0,is_reversed:o,...s?{orbac_subject_id:s}:{}},noCache:l}),w=void 0!==i?i:i=n(922464),A=({aggregatedPinDataId:e,inCommentRepRedesignExp:t,shouldPreviewNewReply:n,closeupAttributionId:i,closeupAttributionUsername:d,commentsDisabled:w,hasComments:A,isReadOnly:C,pinId:I,isVideo:S,pinnerId:T,scrollContainer:z,setIsComposingNewComment:k=()=>{},showingCloseupCommentModule:L,storyPinDataId:E,viewParameter:R,toggleComposerForReply:D,openMwebOverflowMenu:O})=>{let{comment_id:Z}=(0,s.UO)(),M=(0,l.I0)(),N=(0,m.HG)(),H=(0,h.Z)(),F=(0,o.useRef)(A),B=(0,_.Z)(),U=(0,g.lJ)(H,B),W=(0,c.Z)(F.current&&e?P({aggregatedPinDataId:e,featuredCommentIds:Z?[Z]:[],isDesktop:N}):null),{removeUnauthCommentPinId:G,unauthCommentPinId:K}=(0,y.C)(),$=(0,p.lV)(),{toggleAggregatedCommentHelpful:V,toggleAggregatedCommentLike:q}=(0,p.nf)(),J=(0,v.kW)(),Q=(0,l.v9)(t=>(0,b.Z)(t,{aggregatedPinDataId:e,aggregatedComments:$,users:J})),[Y,X]=(0,o.useState)(void 0),ee=()=>{k(!0)};return(0,u.Z)(()=>{!N&&H.isAuth&&K&&I&&K===I&&(ee(),G())}),(0,o.useEffect)(()=>{let e=()=>{let t=!!z&&z.scrollTop+z.clientHeight+10>=z.scrollHeight;W&&!W.isFetching&&(W.isAtEnd?z?.removeEventListener("scroll",e):t&&W.fetchMore())};return z?.addEventListener("scroll",e),()=>{z?.removeEventListener("scroll",e)}},[W,z]),(0,j.jsx)(o.Fragment,{children:(0,j.jsx)(a.xu,{display:"flex",height:t&&0===Q.length?"100%":void 0,marginTop:N?6:t?2:0,width:"100%",children:(0,j.jsx)(r.Z,{aggregatedPinDataId:e,closeupAttributionId:i,closeupAttributionUsername:d,comments:Q,commentsDisabled:w,inCommentRepRedesignExp:t,isDesktop:N,isLoaded:W&&W.isLoaded||!A,isReadOnly:C,isVideo:S,openOverflowMenu:O,parentId:e??"",parentType:x.o.pin,pinId:I,pinnerId:T,reactionListCommentId:Y,shouldPreviewNewReply:n,showingCloseupCommentModule:L,showReactionListForComment:X,storyPinDataId:E,toggleHelpful:(e,t,n)=>()=>{n?M((0,f.YH)({didItDataId:e,isMarkedHelpfulByMe:t,orbacSubjectId:U})):V({aggregatedCommentId:e,isMarkedHelpfulByMe:t,orbacSubjectId:U})},toggleLike:(e,t,n)=>()=>{n?M((0,f.wH)({didItDataId:e,isLikedByMe:t,orbacSubjectId:U})):q({aggregatedCommentId:e,isLikedByMe:t,orbacSubjectId:U})},toggleReplyComposer:D,userAvatarSize:"sm",viewParameter:R})})})};function C({pinKey:e,...t}){let n=(0,d.Z)(w,e),i=(n?.aggregatedPinData?.commentCount||0)+(n?.aggregatedPinData?.didItData?.imagesCount||0);return(0,j.jsx)(A,{aggregatedPinDataId:n?.aggregatedPinData?.entityId,closeupAttributionId:n?.closeupAttribution?.entityId,closeupAttributionUsername:n?.closeupAttribution?.username,commentsDisabled:n?.commentsDisabled,disablePhotoCommentSelection:!!n?.doneByMe,hasComments:i>0&&!n?.commentsDisabled,isVideo:!!n?.videos?.videoList,pinId:n?.entityId,pinnerId:n?.pinner?.entityId,storyPinDataId:n?.storyPinData?.entityId,...t})}},301527:function(e,t,n){n.d(t,{C:()=>a,p:()=>r});var i=n(667294),o=n(213491),l=n(785893);let{Provider:s,useHook:a}=(0,o.Z)("Session");function r({children:e}){let[t,n]=(0,i.useState)(void 0),o=(0,i.useCallback)(()=>n(void 0),[]),a=(0,i.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:n,removeUnauthCommentPinId:o}),[t,o]);return(0,l.jsx)(s,{value:a,children:e})}},646239:function(e,t,n){n.d(t,{Z:()=>l});var i=n(442279),o=n(438274);let l=(0,i.createSelector)((e,{aggregatedComments:t})=>t,({feeds:e},{aggregatedPinDataId:t})=>e[`${o.Z.UNIFIED_COMMENTS}:${t||""}`],({didItData:e})=>e,(e,{users:t})=>t??{},(e,t,n,i)=>{let o=new Set;return t?.map(({id:t,type:l})=>{if(o.has(t))return;o.add(t);let s="aggregatedcomment"===l.toLowerCase()?e[t]:n[t];if(!s)return;let a="user"in s&&("string"==typeof s.user?i[s.user]??{}:s.user??{});return{...s,user:a??{}}}).filter(e=>void 0!==e)||[]})},333651:function(e){e.exports="https://s.pinimg.com/webapp/commentHelpful-99007872.svg"},773655:function(e){e.exports="https://s.pinimg.com/webapp/commentLoved-7942dc4f.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/58736.ru_RU-7391e96d4495390d.mjs.map