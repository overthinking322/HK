(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["16692"],{731517:function(e,t,a){a.d(t,{Z:()=>n});var i=a(994193);async function n(e,t){let{api:a}=(0,i.t)(),n=(0,i.u)();try{n.attempt("getMultipleBizEntityProperties",t);let i=new Date().getTime(),s=await a.post("/ads/v4/business_entities",e,!1);return n.success("getMultipleBizEntityProperties",t),n.latency("getMultipleBizEntityProperties",new Date().getTime()-i,t),s}catch(e){throw n.failure("getMultipleBizEntityProperties",t),e}}(0,i.u)()},861241:function(e,t,a){a.d(t,{Z:()=>n});var i=a(994193);async function n(e,t){let{api:a}=(0,i.t)(),n=(0,i.u)();try{n.attempt("setMultipleBizEntityProperties",t);let i=new Date().getTime(),s=await a.patch("/ads/v4/business_entities",e,!1);return n.success("setMultipleBizEntityProperties",t),n.latency("setMultipleBizEntityProperties",new Date().getTime()-i,t),s}catch(e){throw n.failure("setMultipleBizEntityProperties",t),e}}(0,i.u)()},65711:function(e,t,a){a.d(t,{Z:()=>n});var i=a(462867);let n=()=>{let e=(0,i.Z)();return!!e.isAuth&&e.isPartner}},69406:function(e,t,a){a.d(t,{Oz:()=>i,mo:()=>r,nt:()=>s,v8:()=>n});let i={BUSINESS_ACCOUNT:"BUSINESS_ACCOUNT",BUSINESS_HIERARCHY:"BUSINESS_HIERARCHY",USER_ACCOUNT:"USER",AD_ACCOUNT:"AD_ACCOUNT",PROFILE:"PROFILE",CATALOG:"CATALOG"},n="BUSINESS_PANEL",s="ASSET_PANEL",r=500},800287:function(e,t,a){a.d(t,{lG:()=>R,FE:()=>T,d9:()=>B});var i=a(667294),n=a(616550),s=a(65711),r=a(684645),l=a(462867),u=a(767415);let o=()=>{let e=(0,l.Z)(),t=(0,s.Z)(),[a,n]=(0,i.useState)({isReady:!1}),o=(0,i.useCallback)(async({entityId:e,actingBusinessId:a,favorites:i})=>{t&&(await (0,r.yo)({entityId:e,actingBusinessId:a,favorites:i}),n(e=>{let t={...e,actingBusinessId:a};return i&&(t.favoriteAdAccounts={favoriteAdAccountsMap:{...e.favoriteAdAccounts?.favoriteAdAccountsMap||{},[i.actingBusinessId]:{advertiserId:i.adAccounts}}}),t}))},[t]);return(0,i.useEffect)(()=>{t&&e.isAuth&&!a.isReady&&(async()=>{let t=!1;try{let t=await (0,r.SF)({entityId:e.id});n(e=>({...e,...t}))}catch{t=!0}finally{(0,u.nP)("globalAccountSwitcher.getFavoriteAdAccounts",{sampleRate:1,tags:{businessId:e.id,hasError:t}}),n(e=>({...e,isReady:!0}))}})()},[a.isReady,t,e]),{accountSwitcherConfig:a,setConfig:o}};var c=a(581722),d=a(387535),m=a(442279),p=a(498539);let _=(0,m.createSelector)(p.Z,({viewerIsProfileOwnerOrProfileManager:e})=>e??void 0);var f=a(200619),g=a(601871),y=a(414448);let A=()=>{let e=(0,l.Z)(),t=(0,i.useRef)(e);t.current=e;let a=(0,c.I0)(),n=(0,f.Z)(),s=(0,i.useRef)(n);s.current=n;let u=(0,c.v9)(_),o=u?.data||void 0,m=(0,i.useRef)(o);m.current=o,(0,i.useEffect)(()=>{(async()=>{if(t.current.isAuth&&void 0===u.data){let e=await (0,r.bG)({user_id:t.current.id});if(void 0!==e&&void 0===m.current){let i=(0,g.D3)(t.current,e?.id??"",s)||t.current.isAuth&&t.current.username===e?.username;a((0,d.Z)(!!i))}}})()},[t,m,a,s,u]);let p=(0,y.rc)(o);return{viewerIsProfileOwnerOrProfileManagerData:o,previousIsViewerProfileOwnerOrProfileManager:p}};var h=a(69406),S=a(230201),w=a(213491),N=a(173874),E=a(138482),v=a(613567),I=a(575820),b=a(563218),C=a(131990),O=a(785893);let{Provider:U,useHook:B}=(0,w.Z)("AccountSwitcherContext"),R=e=>e.search&&(0,I.mB)(e.search).advertiserId,T=({children:e})=>{let t=(0,n.TH)(),{params:{userBizId:a,businessHierarchyId:u,advertiserId:c,username:d}}=(0,n.$B)(),{catalogId:m}=(0,C.Z)(),p=R(t),_=(0,l.Z)(),{viewerIsProfileOwnerOrProfileManagerData:f,previousIsViewerProfileOwnerOrProfileManager:g}=A(),{checkExperiment:w}=(0,v.F)(),I=w("web_m10n_business_access_catalogs").anyEnabled,[B,T]=(0,i.useState)(""),[P,L]=(0,i.useState)(null),[Z,z]=(0,i.useState)(!1),[M,F]=(0,i.useState)(null),G=new URLSearchParams(t.search),[D,H]=(0,i.useState)(G.has("actingBusinessId")?null:{id:_.id||"",name:_.fullName||"",img:_.imageMediumUrl||""}),[k,x]=(0,i.useState)(!1),W=(0,s.Z)(),{logContextEvent:j}=(0,S.v)(),{accountSwitcherConfig:q,setConfig:K}=o();(0,i.useEffect)(()=>{u?T(u):T("")},[u]);let Y=(0,i.useCallback)(async({id:e,username:t})=>{let a=await (0,r.bG)({user_id:e,username:t});a&&F({type:e?h.Oz.BUSINESS_ACCOUNT:h.Oz.PROFILE,id:e||a.id,name:a.full_name,img:a.image_medium_url,username:t,ownerImg:a.image_medium_url,ownerName:a.full_name,actingBusinessFullName:D?.name||a.full_name}),x(!1)},[D]),$=(0,y.rc)(d);(0,i.useEffect)(()=>{(0,E.Z)(t)&&M&&$!==d&&d===_.username&&(Y({username:_.username}),H({id:_.id||"",name:_.fullName||"",img:_.imageMediumUrl||""}),L({type:h.nt,id:_.id}))},[t,$,Y,M,d,_.fullName,_.id,_.imageMediumUrl,_.username]),(0,i.useEffect)(()=>{let e=async({businessId:e,assetId:a})=>{if(!e){x(!1);return}let i=I&&(0,N.Bg)(t)?"CATALOG":"AD_ACCOUNT";try{let e={asset:{name:""},type:i};if(_.isAuth){let{data:{data:t={[a]:e}}={}}=await (0,b.pI)({businessId:D?.id||_.id,assetIds:[a],resourceType:i})||{},{asset:n,type:s}=t[a]||e;F({id:a,name:"CATALOG"===i?t[a].owner.full_name:n.name,img:t[a].owner.image_medium_url,type:s,ownerImg:t[a].owner.image_medium_url,ownerName:t[a].owner.full_name,actingBusinessFullName:D?.name||t[a].owner.full_name})}}catch{F({id:_.id||"",name:_.fullName||"",img:_.imageMediumUrl||"",type:h.Oz.BUSINESS_ACCOUNT,ownerImg:_.imageMediumUrl||"",ownerName:_.fullName||"",actingBusinessFullName:_.fullName||""})}x(!1)},i=async({id:e})=>{let t=await (0,r.p)({hierarchyId:e});F({id:e,name:t?.data?t.data.name:"",img:t?.data?t.data.img_medium_url:"",type:h.Oz.BUSINESS_HIERARCHY,ownerImg:t?.data?t.data.img_medium_url:"",ownerName:t?.data?t.data.name:"",actingBusinessFullName:t?.data?t.data.name:""}),x(!1)};if(_.isAuth&&W){let n=M&&M.username&&M.username!==d,s=!0===f&&f!==g;if((!M||n||s)&&!k&&D){let n=(0,N.z6)(t)||(0,N.h3)(t),s=c||!!p&&!n||(0,N.Bg)(t)&&I;x(!0),u?i({id:u}):a?Y({id:a}):(0,E.Z)(t)&&d&&f?Y({username:d}):s?e({businessId:_.id,assetId:c||p||m||""}):M&&M.id===_.id||(F({type:h.Oz.BUSINESS_ACCOUNT,id:_.id||"",name:_.fullName||"",img:_.imageMediumUrl||"",ownerImg:_.imageMediumUrl||"",ownerName:_.fullName||"",actingBusinessFullName:_.fullName||""}),x(!1))}}},[M,_,u,a,d,c,p,D,W,t,Y,k,f,g,m,I]);let V=(0,i.useMemo)(()=>({activePanel:P,selectedHierarchyId:B,switcherOpen:Z,openAccountSwitcher:()=>{if(j({event_type:101,view_type:608,component:14346}),!P){if((0,N.z6)(t))L({type:h.v8});else{let e=new URLSearchParams(t.search).get("actingBusinessId");L({type:h.nt,id:e??D?.id})}}z(!0)},closeAccountSwitcher:()=>{L(M&&!(0,N.z6)(t)?{type:h.nt,id:D?.id}:{type:h.v8}),z(!1)},openAssetPanel:e=>{L({type:h.nt,id:e})},closeAssetPanel:()=>{L(M&&!(0,N.z6)(t)?{type:h.nt,id:D?.id}:{type:h.v8})},activateBusinessPanel:()=>{L({type:h.v8})},actingBusiness:D,selectedAccount:M,setSelectedAccount:F,setActingBusiness:H,accountSwitcherConfig:q,setConfig:K}),[P,B,Z,D,M,q,K,j,t]);return(0,O.jsx)(U,{value:V,children:e})}},684645:function(e,t,a){a.d(t,{IT:()=>o,SF:()=>p,WP:()=>c,bG:()=>m,p:()=>d,yo:()=>_});var i=a(731517),n=a(861241),s=a(27399),r=a(69406),l=a(681698),u=a(109563);let o=e=>({id:e.id,entity_type:r.Oz.BUSINESS_ACCOUNT,requires_mfa_for_roles:e.requires_mfa_for_roles,user:{id:e.user.id,entity_type:r.Oz.USER_ACCOUNT,username:e.user.username,email:e.user.email,full_name:e.user.full_name,image_small_url:e.user.image_small_url,image_medium_url:e.user.image_medium_url}}),c=e=>({id:e.id,entity_type:r.Oz.BUSINESS_ACCOUNT,user:{id:e.id,entity_type:r.Oz.USER_ACCOUNT,username:e.username,email:e.email,full_name:e.fullName,image_small_url:e.imageSmallUrl,image_medium_url:e.imageMediumUrl}}),d=async({hierarchyId:e})=>(await (0,l.Z)({url:`ads/v4/business_access/business_hierarchy/${e}/`})).resource_response,m=async({user_id:e,username:t})=>{if(!t&&!e)return null;let{resource_response:{data:a}}=await s.Z.create("UserResource",{user_id:e,username:t}).callGet();return a},p=async({entityId:e})=>{let t=(await (0,i.Z)([{entity_type:"BIZ_USER",entity_id:e,property_keys:["GLOBAL_ACCOUNT_SWITCHER_CONFIG"]}]))[0];return t&&t.properties?t.properties.GLOBAL_ACCOUNT_SWITCHER_CONFIG:{}},_=async({entityId:e,actingBusinessId:t,favorites:a})=>{let i={};(0,u.k)(t)||(i.actingBusinessId=t),a&&(i.favoriteAdAccounts={favoriteAdAccountsMap:{[a.actingBusinessId]:{advertiserId:a.adAccounts}}}),Object.keys(i).length>0&&await (0,n.Z)([{entity_type:"BIZ_USER",entity_id:e,properties:{GLOBAL_ACCOUNT_SWITCHER_CONFIG:i}}])}},138482:function(e,t,a){a.d(t,{Z:()=>s});var i=a(616550);let n=["/BingSiteAuth.xml","/about","/add-account","/ads","/ads.txt","/age_verification","/all","/app-ads.txt","/apple-app-site-association","/apple-app-site-association.p7m","/attribution_source","/bot.html","/branded-pins","/browserbutton","/buy-it","/careers","/categories","/close-account","/collage-creation-tool","/content-claiming","/convert-business","/convert-personal","/create-business","/create-personal","/creation-inspiration","/creator-onboarding-landing","/csrf_error","/ct.html","/deactivate-account","/deed6a3ef3a44d41bb3ae2bad137db84.txt","/developers","/discover","/edit","/email_verification_error","/engagement","/explore","/favicon.ico","/fb.html","/following","/getWebPushKey","/google_gdn.html","/google_search.html","/googlef5dc42d6e03f6e61.html","/guidedsearch","/help","/holidays-celebrations","/homefeed","/idea-ads-tool","/idea-pin-builder","/ideas","/inbox","/install-shuffles","/invited","/jobs","/lens-search","/login","/logout","/manifest.json","/manifest.webapp","/me","/messages","/mobile","/notifications","/oauth","/app-factory-oauth","/appealed-pin","/oembed.json","/offline.html","/offsite","/opensearch.xml","/parent_contact_info","/parental-passcode","/pin-builder","/pin-creation-tool","/pin-editor","/pin_catalog","/pin_redirect","/pinterest-wellbeing","/pinterest-predicts","/pinterestlens","/pinterestlenstryon","/pinterestwellbeing","/policy","/product-catalogs","/public-beta","/quick-instant-loading-indicator-app-shell.html","/recently-viewed","/refresh_stored_accounts","/refresh_token","/report","/reports-and-violations","/request-data","/robots.txt","/safe-redirect","/search","/settings","/shopping","/signup","/socialmanager","/story-pin-builder","/story_feed","/sw-shell.html","/sw.html","/sw.js","/switch_account","/terms","/today","/topics","/transparent.html","/unauth-profile","/unlink","/upload-image","/upload-image-lens-history","/upload-lens-image","/upload-profile-image","/upload-shuffle-draft","/verified","/verify","/videos","/web-custom-svg","/web-mentorship","/welcome","/windows-app-web-link","/your-shop"];function s(e){return!!(0,i.LX)(e.pathname,{path:"/:username/",exact:!0})&&!n.includes(e.pathname.replace(/\/$/,""))}},387535:function(e,t,a){a.d(t,{Z:()=>i});function i(e){return{type:"UPDATE_VIEWER_IS_PROFILE_OWNER_OR_PROFILE_MANAGER",payload:e}}},498539:function(e,t,a){a.d(t,{Z:()=>i});let i=({businessAccess:e})=>e??{}},109563:function(e,t,a){function i(e){return null==e}function n(e){return!i(e)}a.d(t,{G:()=>n,k:()=>i})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/16692-a3be430766263e12.mjs.map